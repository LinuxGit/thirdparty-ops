---

# The Playbook of DM

- name: check config locally
  hosts: localhost
  any_errors_fatal: true
  tags:
    - always
  roles:
    - check_config_static

- name: deploying dm-worker
  hosts: dm_worker_servers
  any_errors_fatal: true
  tags:
    - dm-worker
  roles:
    - dm-worker

- name: deploying dm-master
  hosts: dm_master_servers
  any_errors_fatal: true
  tags:
    - dm-master
  roles:
    - dm-master

- name: deploying dmctl
  hosts: localhost
  connection: local
  gather_facts: false
  roles:
    - dmctl
